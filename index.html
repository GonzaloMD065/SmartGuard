<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartGuard</title>
    <link rel="shortcut icon" href="./images/favicon.png" />
    <link rel="stylesheet" href="src/index.css" />
  </head>
  <body>
    <div class="login-page" id="login-page">
      <form class="login-form" id="login-form">
        <h2 class="login-form__title">SmartGuard Login</h2>
        <div class="form-group">
          <label for="email" class="form-group__label">Email</label>
          <input type="email" id="email" class="form-group__input" required />
        </div>
        <div class="form-group">
          <label for="password" class="form-group__label">Contrase√±a</label>
          <input
            type="password"
            id="password"
            class="form-group__input"
            required
          />
        </div>
        <button type="submit" class="button button--primary">Entrar</button>
        <p class="login-form__error" id="login-error"></p>
      </form>
    </div>

    <div class="app-container" id="app-container">
      <header class="header">
        <div class="header__logo">CerraduraApp üîí</div>

        <nav class="nav header__nav">
          <ul class="nav__list">
            <li class="nav__item">
              <a
                href="#dashboard"
                class="nav__link nav__link--active"
                data-section="dashboard"
                >Dashboard</a
              >
            </li>
            <li class="nav__item">
              <a href="#registros" class="nav__link" data-section="registros"
                >Registros</a
              >
            </li>
            <li class="nav__item">
              <a href="#personas" class="nav__link" data-section="personas"
                >Personas</a
              >
            </li>
            <li class="nav__item">
              <a
                href="#desbloquear"
                class="nav__link"
                data-section="desbloquear"
                >Desbloquear</a
              >
            </li>
          </ul>
        </nav>

        <div class="notifications header__notifications">
          <button
            class="notifications__button"
            data-action="toggle-notifications"
            id="notifications-button"
          >
            <span>üîî</span>
            <span class="notifications__count" id="notifications-count">3</span>
          </button>
        </div>
        <div class="notifications__dropdown" id="notifications-dropdown">
          <div class="notification-item">¬°Bienvenido a SmartGuard!</div>
        </div>
        <button id="logout-button" class="button button--secondary">
          Cerrar Sesi√≥n
        </button>
      </header>

      <main class="main">
        <section class="section dashboard" id="dashboard">
          <h2 class="section__title">Dashboard</h2>
          <div class="dashboard__grid">
            <div class="card">
              <h3 class="card__title">Accesos Hoy</h3>
              <p class="card__data" data-id="accesos-hoy">12</p>
            </div>
            <div class="card">
              <h3 class="card__title">Fallidos Hoy</h3>
              <p class="card__data" data-id="fallidos-hoy">2</p>
            </div>
            <div class="card">
              <h3 class="card__title">Personas Activas</h3>
              <p class="card__data" data-id="personas-activas">5</p>
            </div>
            <div class="card card--large">
              <h3 class="card__title">Actividad Reciente (Gr√°fico)</h3>
              <div class="card__placeholder"></div>
            </div>
          </div>
        </section>

        <section class="section logs" id="registros">
          <h2 class="section__title">Registros de Acceso</h2>
          <div class="table-container">
            <table class="logs__table">
              <thead>
                <tr>
                  <th>Fecha / Hora</th>
                  <th>Persona</th>
                  <th>Estado</th>
                  <th>M√©todo</th>
                </tr>
              </thead>
              <tbody id="logs-table-body">
                <tr class="logs__row">
                  <td data-label="Fecha">29 Oct 2025, 10:20 AM</td>
                  <td data-label="Persona">Ana Garc√≠a</td>
                  <td data-label="Estado">
                    <span class="status status--success">Exitoso</span>
                  </td>
                  <td data-label="M√©todo">Huella</td>
                </tr>
                <tr class="logs__row">
                  <td data-label="Fecha">29 Oct 2025, 09:15 AM</td>
                  <td data-label="Persona">Desconocido</td>
                  <td data-label="Estado">
                    <span class="status status--failed">Fallido</span>
                  </td>
                  <td data-label="M√©todo">Huella</td>
                </tr>
                <tr class="logs__row">
                  <td data-label="Fecha">28 Oct 2025, 08:00 PM</td>
                  <td data-label="Persona">Carlos Ruiz</td>
                  <td data-label="Estado">
                    <span class="status status--success">Exitoso</span>
                  </td>
                  <td data-label="M√©todo">App M√≥vil</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="section people" id="personas">
          <h2 class="section__title">Personas Autorizadas</h2>
          <div class="people__actions">
            <button
              class="button button--secondary"
              data-action="add-person"
              id="add-person-button"
            >
              ‚ûï Agregar Persona
            </button>
          </div>
          <div class="people__list" id="people-list">
            <article class="person-card" data-userid="1">
              <div class="person-card__avatar"></div>
              <div class="person-card__info">
                <h3 class="person-card__name">Ana Garc√≠a</h3>
                <span class="person-card__role">Administrador</span>
              </div>
              <div class="person-card__status">
                <span class="icon" title="Acceso con Huella">üñêÔ∏è</span>
                <button
                  class="person-card__action-button person-card__action-button--delete"
                  data-action="delete-person"
                  data-id="1"
                >
                  üóëÔ∏è
                </button>
              </div>
            </article>

            <article class="person-card" data-userid="2">
              <div class="person-card__avatar"></div>
              <div class="person-card__info">
                <h3 class="person-card__name">Carlos Ruiz</h3>
                <span class="person-card__role">Residente</span>
              </div>
              <div class="person-card__status">
                <span class="icon" title="Acceso con Huella">üñêÔ∏è</span>
                <button
                  class="person-card__action-button person-card__action-button--delete"
                  data-action="delete-person"
                  data-id="2"
                >
                  üóëÔ∏è
                </button>
              </div>
            </article>

            <article class="person-card" data-userid="3">
              <div
                class="person-card__avatar person-card__avatar--pending"
              ></div>
              <div class="person-card__info">
                <h3 class="person-card__name">Invitado Temporal</h3>
                <span class="person-card__role">Vence en 3h</span>
              </div>
              <div class="person-card__status">
                <span class="icon" title="Acceso con App">üì±</span>
                <button
                  class="person-card__action-button person-card__action-button--delete"
                  data-action="delete-person"
                  data-id="2"
                >
                  üóëÔ∏è
                </button>
              </div>
            </article>
          </div>
        </section>

        <section class="section unlock" id="desbloquear">
          <h2 class="section__title">Desbloqueo Manual</h2>
          <div class="unlock-keypad">
            <div class="unlock-keypad__display">
              <span class="unlock-keypad__digit"></span>
              <span class="unlock-keypad__digit"></span>
              <span class="unlock-keypad__digit"></span>
              <span class="unlock-keypad__digit"></span>
              <span class="unlock-keypad__digit"></span>
              <span class="unlock-keypad__digit"></span>
            </div>
            <div class="unlock-keypad__grid">
              <button class="unlock-keypad__button" data-key="1">1</button>
              <button class="unlock-keypad__button" data-key="2">2</button>
              <button class="unlock-keypad__button" data-key="3">3</button>
              <button class="unlock-keypad__button" data-key="4">4</button>
              <button class="unlock-keypad__button" data-key="5">5</button>
              <button class="unlock-keypad__button" data-key="6">6</button>
              <button class="unlock-keypad__button" data-key="7">7</button>
              <button class="unlock-keypad__button" data-key="8">8</button>
              <button class="unlock-keypad__button" data-key="9">9</button>
              <button
                class="unlock-keypad__button unlock-keypad__button--clear"
                data-action="clear"
              >
                C
              </button>
              <button class="unlock-keypad__button" data-key="0">0</button>
              <button
                class="unlock-keypad__button unlock-keypad__button--confirm"
                data-action="confirm"
              >
                ‚Üµ
              </button>
            </div>
            <div class="unlock-keypad__actions">
              <button class="button button--primary" data-action="submit-code">
                Desbloquear
              </button>
            </div>
          </div>
        </section>
      </main>

      <footer class="footer">
        <p class="footer__text">
          ¬© 2025 CerraduraApp. Todos los derechos reservados.
        </p>
      </footer>
    </div>

    <div class="modal" id="person-modal">
      <div class="modal__content">
        <button class="modal__close-button" id="close-modal-button">
          &times;
        </button>
        <h2 class="modal__title" id="modal-title">Agregar Persona</h2>
        <form class="modal-form" id="person-form">
          <input type="hidden" id="person-id" name="id" />
          <div class="form-group">
            <label for="person-nombre" class="form-group__label">Nombre</label>
            <input
              type="text"
              id="person-nombre"
              class="form-group__input"
              required
            />
          </div>
          <div class="form-group">
            <label for="person-rol" class="form-group__label">Rol</label>
            <select id="person-rol" class="form-group__input">
              <option value="Residente">Residente</option>
              <option value="Administrador">Administrador</option>
              <option value="Invitado">Invitado</option>
            </select>
          </div>
          <div class="form-group">
            <label for="person-fingerprint" class="form-group__label"
              >ID de Huella (del sensor)</label
            >
            <input
              type="number"
              id="person-fingerprint"
              class="form-group__input"
              required
            />
          </div>
          <button
            type="submit"
            class="button button--primary"
            id="modal-submit-button"
          >
            Guardar
          </button>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="src/index.js" type="module"></script>
  </body>
</html>
